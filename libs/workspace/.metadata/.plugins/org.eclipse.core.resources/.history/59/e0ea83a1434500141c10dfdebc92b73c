package activity;

import java.util.ArrayList;

import model.DiskList;
import model.Event;
import model.EventList;

import com.example.todolist.R;
import com.google.gson.Gson;

import activity.MainActivity.AddListener;
import activity.MainActivity.ArchiveClick;
import activity.MainActivity.ClickListener;
import activity.MainActivity.RemoveListener;
import adapter.Adapter;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;


public class ArchivedEventActivity extends Activity {
	private ListView archList=null;
	private Button remove=null;
	private Button unarchive=null;
	private EventList eventList=null;
	private Adapter adapter=null;
	private SharedPreferences dataBase=null;
	private Gson gson;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.archive_list);
		
		archList=(ListView)findViewById(R.id.arch_list);
        remove=(Button)findViewById(R.id.remove_button2);
        unarchive=(Button)findViewById(R.id.unarchive_button);
        gson=new Gson();
	}
	
	
	@Override
	protected void onResume() {
		super.onResume();
		//getDiskData
	    dataBase=getSharedPreferences("DB",0);
	    DiskList tmpList=gson.fromJson(dataBase.getString("ARCH_LIST",gson.toJson(new DiskList(new ArrayList<Event>()))),DiskList.class);
	    eventList=new EventList(tmpList.getList());
		//init adapter
	    adapter=new Adapter(this,R.layout.single_layout,eventList.getCurrentList());
		archList.setAdapter(adapter);
		archList.setOnItemClickListener(MainActivity.ClickListener());
		eventList.setAdpater(adapter);
	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		getMenuInflater().inflate(R.menu.archived_event, menu);
		return true;
	}
}
